<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель администратора</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="stylesheet" href="../styles/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Хедер -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="../assets/images/header-logo.svg" alt="Аудитерия">
            </div>
            <nav class="nav-menu">
                <a href="../index.html">Каталог</a>
                <a href="../cart.html">Корзина (<span id="cart-count">0</span>)</a>
                <a href="../index.html" style="color: #ff6b35; font-weight: bold;">Вернуться на сайт</a>
            </nav>
            <div class="nav-actions">
                <button class="search-btn" onclick="window.location.href='../search.html'">
                    <img src="../assets/images/search-icon.svg" alt="Поиск">
                </button>
                <div class="profile">
                    <div class="profile-icon">
                        <img src="../assets/images/user-avatar.svg" alt="Аватар">
                    </div>
                    <span class="profile-name" id="admin-username">Администратор</span>
                </div>
                <button class="logout-btn" id="admin-logout-btn">Выйти</button>
            </div>
        </div>
    </header>

    <main class="admin-content">
        <h1>Панель администратора</h1>
        
        <div class="admin-section">
        <h2>Добавить/Редактировать товар</h2>
        <form id="product-form">
            <div class="form-group">
                <label for="title">Название товара:</label>
                <input type="text" id="title" name="title" required>
            </div>
            
            <div class="form-group">
                <label for="author_id">ID автора:</label>
                <input type="number" id="author_id" name="author_id">
                <small style="color: #666;">Или используйте поле "Имя автора" ниже для автоматического создания</small>
            </div>
            
            <div class="form-group">
                <label for="author_name">Имя автора (опционально):</label>
                <input type="text" id="author_name" name="author_name" placeholder="Если автор не существует, он будет создан">
            </div>
            
            <div class="form-group">
                <label for="description">Описание:</label>
                <textarea id="description" name="description" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="price">Цена:</label>
                <input type="number" id="price" name="price" step="0.01" min="0" required>
            </div>
            
            <div class="form-group">
                <label for="cover_image_url">URL обложки (опционально):</label>
                <input type="url" id="cover_image_url" name="cover_image_url" placeholder="https://example.com/image.jpg">
            </div>
            
            <button type="submit">Сохранить</button>
            <button type="button" id="cancel-edit" style="display: none;">Отменить редактирование</button>
        </form>
    </div>
    
    <div class="admin-section">
        <h2>Товары</h2>
        <div id="products-container">
            <div class="loading">Загрузка товаров...</div>
        </div>
        <table id="products-table" style="display: none;">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Название</th>
                    <th>Автор</th>
                    <th>Описание</th>
                    <th>Цена</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody id="products-tbody">
            </tbody>
        </table>
    </div>
    
    <!-- Prompts Manager Section -->
    <div class="admin-section">
        <h2>Центр управления AI (Редактор промптов)</h2>
        <div id="prompts-list"></div>
    </div>
    
    <!-- AI Recommendations Section -->
    <div class="admin-section">
        <h2>Core Domain: AI-Рекомендации</h2>
        <div class="ai-recommendations-container">
            <div class="form-group">
                <label for="ai-prompt">Запрос для AI-рекомендаций:</label>
                <textarea id="ai-prompt" name="ai-prompt" placeholder="Например: Рекомендуй мне лучшие книги из каталога" rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label for="ai-model">Модель AI:</label>
                <select id="ai-model" name="ai-model">
                    <option value="gemini-pro">Gemini 2.0 Flash</option>
                    <option value="gemini-flash">Gemini 2.0 Flash</option>
                    <option value="claude-3">Claude 3.5 Sonnet</option>
                    <option value="gpt-4">GPT-4 Turbo</option>
                    <option value="llama-3">Llama 3 8B Instruct</option>
                </select>
            </div>
            
            <button type="button" id="generate-btn" class="ai-generate-btn">
                <span class="btn-text">Сгенерировать рекомендации</span>
                <span class="btn-loading" style="display: none;">Генерация...</span>
            </button>
            
            <div id="ai-result" class="ai-result-container" style="display: none;">
                <h3>Результат AI-анализа:</h3>
                <div class="ai-result-content"></div>
            </div>
        </div>
    </div>
    </main>
    
    <script src="../scripts/auth.js"></script>
    <script src="../scripts/navigation.js"></script>
    <script src="admin.js"></script>
</body>
</html>
